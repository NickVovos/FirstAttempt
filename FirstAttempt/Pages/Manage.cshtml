@page
@model FirstAttempt.Pages.ManageModel
@{
}
@using Microsoft.AspNetCore.Mvc.Rendering


<div class="space-y-6">
    <form method="post">
        <div class="flex flex-col md:flex-row gap-4">
            <input type="text"
                   name="SearchTerm"
                   class="input md:w-1/3"
                   placeholder="Search recipes..."
                   value="@Model.SearchTerm" />

            <select name="CategoryFilter"
                    class="select md:w-1/4"
                    value="@Model.CategoryFilter">
                <option value="all">All Categories</option>
                <option value="Main">Main</option>
                <option value="Dessert">Dessert</option>
                <option value="Appetizer">Appetizer</option>
                <option value="Beverage">Beverage</option>
            </select>

            <button type="submit" class="btn">Filter</button>
        </div>
    </form>

    <table class="table-auto w-full">
        <thead>
            <tr>
                <th>Recipe Title</th>
                <th>Category</th>
                <th>Description</th>
                <th class="text-right">Actions</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var recipe in Model.FilteredRecipes)
            {
                <tr>
                    <td>@recipe.Title</td>
                    <td>@recipe.Category</td>
                    <td>@recipe.Description</td>
                    <td class="text-right">
                        <form method="post">
                            <input type="hidden" name="RecipeId" value="@recipe.Id" />
                            <button type="submit" name="action" value="View" class="btn btn-outline">View</button>
                            <button type="submit" name="action" value="Modify" class="btn btn-outline">Modify</button>
                            <button type="submit" name="action" value="Delete" class="btn btn-outline">Delete</button>
                        </form>
                    </td>
                </tr>
            }
        </tbody>
    </table>

    @if (Model.RecipeToDelete != null)
    {
        <div class="modal">
            <div class="modal-content">
                <h2>Delete Recipe</h2>
                <p>Are you sure you want to delete "@Model.RecipeToDelete.Title"? This action cannot be undone.</p>
                <form method="post">
                    <input type="hidden" name="DeleteRecipeId" value="@Model.RecipeToDelete.Id" />
                    <button type="submit" name="action" value="Cancel" class="btn">Cancel</button>
                    <button type="submit" name="action" value="ConfirmDelete" class="btn btn-danger">Delete</button>
                </form>
            </div>
        </div>
    }
</div>